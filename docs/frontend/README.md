# NVR Universal Deep Research - Фронтенд

Next.js приложение для системы NVR Universal Deep Research, предоставляющее интерактивный интерфейс для интеллектуального исследования и создания отчётов.

Это программное обеспечение предоставляется исключительно в исследовательских и демонстрационных целях. Оно предназначено исключительно как прототип для демонстрации исследовательских концепций и методологий в области искусственного интеллекта и автоматизированных исследовательских систем.

- Это программное обеспечение не предназначено для производственного развёртывания, коммерческого использования или любого реального применения, где требуется надёжность, точность или безопасность.
- Это программное обеспечение содержит экспериментальные функции, непроверенные методологии и реализации исследовательского уровня, которые могут содержать ошибки, уязвимости безопасности или другие проблемы.
- Программное обеспечение предоставляется "КАК ЕСТЬ" без каких-либо гарантий. Ни NVIDIA Corporation, ни авторы не несут ответственности за любой ущерб, возникший в результате использования этого программного обеспечения, в максимальной степени, разрешённой законом.

Используя это программное обеспечение, вы подтверждаете, что прочитали и поняли полный файл DISCLAIMER и согласны соблюдать его условия. Для получения полного юридического отказа от ответственности, пожалуйста, ознакомьтесь с файлом [DISCLAIMER](../../apps/frontend/DISCLAIMER.txt) в этом каталоге.

## Возможности

- Интерактивный интерфейс исследований с отслеживанием прогресса в реальном времени
- Настраиваемые стратегии исследований
- Поддержка конечных точек API V1 и V2
- Режим пробного запуска для тестирования
- Генерация и просмотр отчётов в реальном времени

## Работа через Turborepo

- Структура workspace: код фронтенда расположен в `apps/frontend`.
- Запускайте команды из корня репозитория, используя Turbo для согласованного кеша:
  - `turbo run dev --filter=apps/frontend` — дев-сервер (без кеша, live reload).
  - `turbo run build --filter=apps/frontend` — production-сборка Next.js.
  - `turbo run lint --filter=apps/frontend` — ESLint с учетом общих зависимостей.
- Переменные окружения хранятся в `apps/frontend/.env.local`; Turborepo не кеширует содержимое файла, поэтому убедитесь, что он создан перед запуском задач.
- Если кеш приводит к странным ошибкам, удалите `.turbo` и выполните команды повторно (`TURBO_CACHE=none turbo run build` для CI).

## Конфигурация

Фронтенд-приложение легко настраивается через переменные окружения. Скопируйте пример файла окружения и настройте его для вашего развёртывания:

```bash
cp apps/frontend/env.example apps/frontend/.env.local
```

### Переменные окружения

#### Конфигурация Backend API

- `NEXT_PUBLIC_BACKEND_BASE_URL`: Базовый URL вашего backend-сервера (по умолчанию: `http://localhost`)
- `NEXT_PUBLIC_BACKEND_PORT`: Порт, на котором работает ваш backend-сервер (по умолчанию: `8000`)
- `NEXT_PUBLIC_API_VERSION`: Версия API для использования - `v1` или `v2` (по умолчанию: `v2`)

#### Конфигурация выполнения

- `NEXT_PUBLIC_DRY_RUN`: Включить режим пробного запуска - `true` или `false` (по умолчанию: `false`)
- `NEXT_PUBLIC_ENABLE_V2_API`: Включить V2 API - `true` или `false` (по умолчанию: `true`)

#### Конфигурация фронтенда

- `NEXT_PUBLIC_FRONTEND_PORT`: Порт для сервера разработки фронтенда (по умолчанию: `3000`)
- `NEXT_PUBLIC_FRONTEND_HOST`: Хост для сервера разработки фронтенда (по умолчанию: `localhost`)

### Пример конфигурации

Для производственного развёртывания с backend на другом сервере:

```bash
NEXT_PUBLIC_BACKEND_BASE_URL=http://your-backend-server.com
NEXT_PUBLIC_BACKEND_PORT=8000
NEXT_PUBLIC_API_VERSION=v2
NEXT_PUBLIC_DRY_RUN=false
NEXT_PUBLIC_ENABLE_V2_API=true
```

Для локальной разработки:

```bash
NEXT_PUBLIC_BACKEND_BASE_URL=http://localhost
NEXT_PUBLIC_BACKEND_PORT=8000
NEXT_PUBLIC_API_VERSION=v2
NEXT_PUBLIC_DRY_RUN=true
NEXT_PUBLIC_ENABLE_V2_API=true
```

## Начало работы

1. **Установите зависимости:**

   ```bash
   # Выполняйте из корня монорепозитория
   npm install
   ```

2. **Настройте переменные окружения:**

   ```bash
   cp apps/frontend/env.example apps/frontend/.env.local
   # Отредактируйте apps/frontend/.env.local с вашей конфигурацией
   ```

3. **Запустите сервер разработки:**

   ```bash
   turbo run dev --filter=apps/frontend
   ```

4. **Откройте браузер:**
   Перейдите по адресу [http://localhost:3000](http://localhost:3000), чтобы увидеть приложение.

## Доступные скрипты

- `turbo run dev --filter=apps/frontend` - Запустить сервер разработки с Turbopack
- `turbo run build --filter=apps/frontend` - Собрать приложение для production
- `turbo run start --filter=apps/frontend` - Запустить production-сервер (после сборки)
- `turbo run lint --filter=apps/frontend` - Запустить ESLint для фронтенда

## Структура проекта

```
src/
├── app/                 # Директория приложения Next.js
│   ├── page.tsx        # Главная страница приложения
│   ├── layout.tsx      # Корневой layout
│   └── globals.css     # Глобальные стили
├── components/         # React-компоненты
│   ├── PromptBar.tsx   # Основной интерфейс ввода
│   ├── ResearchProgressList.tsx  # Отслеживание прогресса
│   ├── ReportViewer.tsx # Отображение отчёта
│   └── ...            # Другие UI-компоненты
├── config/            # Управление конфигурацией
│   └── index.ts       # Конфигурация приложения
└── types/             # Определения типов TypeScript
    └── ApplicationState.ts
```

## Требования к Backend

Этот фронтенд требует совместимого backend-сервера, работающего с NVR Universal Deep Research API. Backend должен:

- Поддерживать конечные точки `/api/research` (V1) и `/api/research2` (V2)
- Принимать POST-запросы с JSON-данными
- Возвращать Server-Sent Events (SSE) для обновлений прогресса в реальном времени
- Поддерживать параметр режима пробного запуска

## Развёртывание

Приложение может быть развёрнуто на любой платформе, поддерживающей Next.js:

1. Соберите приложение: `npm run build`
2. Запустите production-сервер: `npm run start`
3. Установите соответствующие переменные окружения для вашего развёртывания

### Примеры платформ развёртывания

- **Vercel**: Подключите ваш Git-репозиторий и установите переменные окружения в панели управления
- **Netlify**: Сборка и развёртывание с конфигурацией переменных окружения
- **Railway**: Развёртывание с автоматическим управлением переменными окружения
- **Самостоятельный хостинг**: Запуск на вашем собственном сервере с правильной конфигурацией окружения

## Устранение неполадок

### Распространённые проблемы

1. **Ошибки подключения к Backend**: Убедитесь, что ваш backend-сервер работает и `NEXT_PUBLIC_BACKEND_BASE_URL` и `NEXT_PUBLIC_BACKEND_PORT` настроены правильно.

2. **Ошибки CORS**: Убедитесь, что ваш backend-сервер разрешает запросы с вашего фронтенд-домена.

3. **Проблемы с версией API**: Если вы испытываете проблемы совместимости API, попробуйте переключиться между `v1` и `v2`, используя переменную окружения `NEXT_PUBLIC_API_VERSION`.

### Советы по разработке

- Используйте `NEXT_PUBLIC_DRY_RUN=true` во время разработки, чтобы избежать реальных вызовов API
- Приложение поддерживает горячую перезагрузку - изменения в вашем коде будут отражены немедленно
- Проверьте консоль браузера для подробных сообщений об ошибках

## Вклад в проект

1. Сделайте fork репозитория
2. Создайте ветку для функции
3. Внесите изменения
4. Тщательно протестируйте
5. Отправьте pull request

## Лицензия и отказ от ответственности

Это программное обеспечение предоставляется только в исследовательских и демонстрационных целях. Пожалуйста, обратитесь к файлу [DISCLAIMER](DISCLAIMER.txt) для получения полных условий использования этого программного обеспечения. Вы можете найти лицензию в [LICENSE](LICENSE.txt).

**Не используйте этот код в production.**
